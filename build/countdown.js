var CountDown=Backbone.Model.extend({defaults:{_interval:null,_secondsRemaining:0,_status:"stopped",alarmSound:"alarm-clock.mp3",pomodoroMinutes:"25",breakMinutes:"5",longBreakMinutes:"15"},play:function(e){switch(this.get("_status")){case"paused":this._countDown(null);return;case"playing":return}switch(e){case"break":this._countDown(this.get("breakMinutes"));break;case"longbreak":this._countDown(this.get("longBreakMinutes"));break;default:this._countDown(this.get("pomodoroMinutes"))}this.set("_status","playing")},pause:function(){this.set("_status","paused"),clearInterval(this.get("_interval"))},stop:function(){this.set("_status","stopped"),this.set("_secondsRemaining",0),this._updateClock(),clearInterval(this.get("_interval"))},_playSound:function(){$("#dummy").html('<embed src="'+this.get("alarmSound")+'" hidden="true" autostart="true" loop="false" />')},_updateClock:function(){var e=$("#countdown"),t=this.get("_secondsRemaining"),n=Math.floor(t/60);n<10&&(n="0"+n);var r=t%60;r<10&&(r="0"+r);var i=n+":"+r;e.html(i);if(this.get("_secondsRemaining")==0&&this.get("_status")!="stopped"){var e=$("#countdown-message").html("O tempo acabou");clearInterval(this.get("_interval")),this._playSound();return}this.set("_secondsRemaining",t-1)},_countDown:function(e){var t=this;clearInterval(this.get("_interval")),e!=null&&this.set("_secondsRemaining",e*60),this._updateClock(),this.set("_interval",setInterval(function(){t._updateClock()},1e3))}}),pomodoro=new CountDown;